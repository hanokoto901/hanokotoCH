body {
    font-family: 'Noto Sans JP', sans-serif !important;
    line-height: 1.5;
    background: #fff;
    margin: 0;
    padding: 0 8px;
    color: #222;
}

:root {
    /* タブ設定 */
    --tab-radius: 8px;
    --tab-padding-y: 8px;
    --tab-padding-x: 10px;
    --tab-min-width: 88px;
    --tab-font-size: 14px;
    --tab-gap: 8px;
    
    /* 基本カラー */
    --primary: #3498db;
    --primary-hover: #217dbb;
    --primary-light: #eef6fb;
    
    /* タブカラー */
    --tab-bg: #f6f8fa;
    --tab-color: #222;
    --tab-border: #d1d9e0;
    --tab-hover-bg: #e8f0f6;
    --tab-focus-ring: rgba(52, 152, 219, 0.2);
    
    /* キャラクターカラー */
    --hanon: #03ddff;
    --hanon-hover: #02c6e6;
    --hanon-border: #02c6e6;
    --kotoha: #73f002;
    --kotoha-hover: #66d002;
    --kotoha-border: #66d002;
    --neutral: #f2f2f2;
    --neutral-hover: #e5e5e5;
    --neutral-border: #d0d0d0;
    
    /* インジケーター */
    --tab-indicator-height: 3px;
    --tab-indicator-radius: 3px;

    /* グレースケール */
    --bg-light: #f6f8fa;
    --bg-white: #fff;
    --border-color: #ddd;
    --border-light: #e6e9ee;
    --text-primary: #222;
    --text-secondary: #555;
    --text-muted: #888;

    /* 余白 */
    --space-1: 4px;
    --space-2: 6px;
    --space-3: 8px;
    --space-4: 12px;
    --space-5: 16px;

    /* 追加: タブの状態別デフォルト値 */
    --tab-base-bg: var(--tab-bg);
    --tab-base-text: var(--tab-color);
    --tab-base-border: var(--tab-border);
    --tab-hover-bg-local: var(--tab-hover-bg);
    --tab-active-bg: var(--tab-base-bg);
    --tab-active-text: var(--tab-base-text);
    --tab-active-border: var(--tab-base-border);
}

/* タブ */
.tabs {
    display: flex;
    gap: 8px;
    margin-bottom: var(--space-3);
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    padding-bottom: var(--space-2);
    position: relative;           /* 追加：インジケーター配置のため */
    scroll-behavior: smooth;      /* 追加：なめらかな横スクロール */
    /* タブ用スクロールバー */
    scrollbar-width: thin;
    scrollbar-color: #ccc #f6f8fa;
}

.tabs::-webkit-scrollbar {
    height: 4px; /* 6px → 4px */
}

.tabs::-webkit-scrollbar-track {
    background: #f6f8fa;
    border-radius: 3px;
}

.tabs::-webkit-scrollbar-thumb {
    background: #ccc;
    border-radius: 3px;
}

.tabs::-webkit-scrollbar-thumb:hover {
    background: #aaa;
}

/* アクティブインジケーター */
.tab-indicator {
    position: absolute;
    bottom: 0;
    left: 0;
    height: var(--tab-indicator-height);
    width: 0;
    background: var(--primary);
    border-radius: var(--tab-indicator-radius);
    transition: left .25s ease, width .25s ease, background-color .2s ease;
    pointer-events: none;
    will-change: left, width; /* パフォーマンスヒント */
}

/* タブ種別ごとのインジケーター色 */
.tabs[data-active="はのこと・ハコリリ"] .tab-indicator { background: #FFEDB3; }
.tabs[data-active="Hanon"] .tab-indicator { background: var(--hanon); }
.tabs[data-active="Kotoha"] .tab-indicator { background: var(--kotoha); }

/* タブコンテンツ */
.tab-content {
    display: none;
    border: 1px solid var(--border-color);
    background: var(--bg-white);
    border-radius: 0 0 6px 6px;
    max-height: none;      /* 縦スクロールは.table-responsiveに委譲 */
    overflow: visible;     /* stickyが効くように可視に */
    -webkit-overflow-scrolling: touch;
    scrollbar-width: thin;
    scrollbar-color: #bbb var(--bg-light);
}
.tab-content.active {
    display: block;
}

/* Webkit系ブラウザ用カスタムスクロールバー */
/* セレクタを .tab-content.active → .tab-content に変更 */
.tab-content::-webkit-scrollbar {
    width: 10px;
    height: 10px;
}
.tab-content::-webkit-scrollbar-track {
    background: #f0f0f0;
    border-radius: 5px;
}
.tab-content::-webkit-scrollbar-thumb {
    background: #bbb;
    border-radius: 5px;
    transition: background 0.2s ease;
}
.tab-content::-webkit-scrollbar-thumb:hover {
    background: #999;
}
.tab-content::-webkit-scrollbar-corner {
    background: #f0f0f0;
}

.tab {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: var(--tab-min-width);
    padding: var(--tab-padding-y) var(--tab-padding-x);
    gap: var(--tab-gap);
    font-size: var(--tab-font-size);
    font-weight: 600;
    cursor: pointer;
    border-radius: var(--tab-radius);
    border: 1px solid var(--tab-base-border);
    background: var(--tab-base-bg);
    color: var(--tab-base-text);
    text-decoration: none;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
    transition: background 0.15s ease;
    /* 統合: 文字色の黒指定＆タップ領域確保 */
    color: var(--text-primary) !important;
    min-height: 40px;
}

.tab.active {
    color: var(--text-primary) !important;
}

.tab:hover {
    background: var(--tab-hover-bg-local);
}

.tab:focus-visible {
    outline: none;
    box-shadow: 0 0 0 4px var(--tab-focus-ring);
}

/* 選択状態のタブ（変数で一括制御） */
.tab.active {
    background: var(--tab-active-bg) !important;
    color: var(--tab-active-text) !important; /* var(--text-primary) を使用しており黒になります */
    border-color: var(--tab-active-border) !important;
    /* transform: translateY(-1px); ← ページリロード時に影っぽく見える効果を削除 */
}

/* 件数バッジ */
.tab .tab-label {
    display: inline-flex;
    align-items: center;
    gap: 6px;
}
.tab .tab-label::before {
    content: attr(data-label-full); /* デフォルトは完全名 */
}
.tab .tab-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 18px;
    height: 18px;
    padding: 0 6px;
    border-radius: 999px;
    font-size: 11px;
    font-weight: 700;
    line-height: 1;
    color: #fff;
    background: rgba(0,0,0,0.25); /* 背景色に依存せず視認可能 */
}

/* はのこと・ハコリリ: 集約（重複削除） */
.tab[data-class="はのこと・ハコリリ"] {
    --tab-base-bg: #FFEDB3;
    --tab-base-text: var(--text-primary);
    --tab-base-border: #E6D79F;
    --tab-hover-bg-local: #FFE48A; /* 統一: ホバー時は少し濃く */
    --tab-active-bg: #FFEDB3;
    --tab-active-text: var(--text-primary);
    --tab-active-border: #E6D79F;
}

/* 個別カラー: 変数のみ指定（重複定義を整理） */
.tab[data-class="Hanon"] {
    --tab-base-bg: var(--hanon);
    --tab-base-text: var(--text-primary);
    --tab-base-border: var(--hanon-border);
    --tab-hover-bg-local: var(--hanon-hover);
    --tab-active-bg: var(--hanon);
    --tab-active-text: var(--text-primary);
    --tab-active-border: var(--hanon-border);
}

.tab[data-class="Kotoha"] {
    --tab-base-bg: var(--kotoha);
    --tab-base-text: var(--text-primary);
    --tab-base-border: var(--kotoha-border);
    --tab-hover-bg-local: var(--kotoha-hover);
    --tab-active-bg: var(--kotoha);
    --tab-active-text: var(--text-primary);
    --tab-active-border: var(--kotoha-border);
}

/* テーブル */
table {
    border-collapse: collapse;
    width: 100%;
    background: var(--bg-white);
    font-family: "segoe ui", sans-serif;
}
table thead th {
    position: sticky;
    top: 0;
    background: #f4f4f4;
    z-index: 2;
    /* 追加: スクロール時の隙間対策 */
    box-shadow: 0 1px 0 0 var(--border-color); /* 下線を追加 */
}
table thead th::after {
    /* 追加: ヘッダーの上部に隙間ができないように */
    content: '';
    position: absolute;
    left: 0;
    right: 0;
    top: -1px;
    height: 1px;
    background: #f4f4f4;
}
th, td {
    border: 1px solid var(--border-color);
    padding: 4px 6px;
    text-align: left;
    font-size: 10px;
    vertical-align: top;
}
th {
    background-color: #f4f4f4;
    text-align: center;
    font-weight: 600;
    padding: 5px 6px;
}
.date {
    text-align: center;
    font-weight: 500;
}
.fit {
    width: fit-content;
    max-width: fit-content;
    white-space: nowrap;
    padding-left: 4px;
    padding-right: 4px;
}
.fix {
    width: 25%;
    padding-left: 4px;
    padding-right: 4px;
}

/* リンク */
a {
    color: var(--primary);
    text-decoration: none;
    font-size: 10px;
    word-break: break-all;
}
a:hover {
    text-decoration: underline;
    color: var(--primary-hover);
}

/* 段落 */
p {
    margin: 4px 0 10px 0;
    font-size: 14px; /* 12px → 14px 統一 */
    color: var(--text-secondary);
}

/* ヘッダー */
.site-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    padding: var(--space-2) var(--space-1);
    background: var(--bg-white);
    border-bottom: 1px solid var(--border-light);
    position: sticky;
    top: 0;
    z-index: 1000;
    box-shadow: 0 1px 0 var(--border-light);
}
.header-left {
    display: flex;
    align-items: center;
    gap: var(--space-4);
    flex: 1; /* 追加: ロゴとナビで領域確保 */
}
.header-logo {
    height: 48px;
    max-height: 64px;
}
.header-nav {
    display: flex;
    gap: var(--space-3);
    flex-wrap: wrap;
}
.nav-link {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 6px 10px;
    color: #1f2d3d;
    text-decoration: none;
    font-size: 14px;
    font-weight: 500;
    border-radius: 6px;
    transition: background 0.2s ease;
    cursor: pointer;
}
.nav-link:hover {
    background: #f0f0f0;
    color: #1f2d3d;
    text-decoration: none;
}
.nav-link i {
    font-size: 15px;
}

/* ハンバーガーメニューボタン（デフォルト非表示） */
.menu-toggle {
    display: none;
    width: 40px;
    height: 40px;
    background: none;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    cursor: pointer;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 5px;
    padding: 0;
    transition: background 0.2s;
}
.menu-toggle:hover {
    background: var(--bg-light);
}
.menu-toggle span {
    display: block;
    width: 20px;
    height: 2px;
    background: var(--text-primary);
    transition: all 0.3s;
}
.menu-toggle.active span:nth-child(1) {
    transform: rotate(45deg) translate(5px, 5px);
}
.menu-toggle.active span:nth-child(2) {
    opacity: 0;
}
.menu-toggle.active span:nth-child(3) {
    transform: rotate(-45deg) translate(6px, -6px);
}

/* ボタン */
.header-button {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 10px;
    background: var(--primary);
    color: #fff !important;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px !important;
    font-weight: 500;
    text-decoration: none !important;
    -webkit-tap-highlight-color: transparent;
    transition: background 0.2s ease;
}
.header-button:hover,
.header-button:focus-visible {
    background: var(--primary-hover);
    color: #fff !important;
    text-decoration: none !important;
}
.header-button.youtube {
    background: #ff0000;
}
.header-button.youtube:hover,
.header-button.youtube:focus-visible {
    background: #cc0000;
    color: #fff !important;
}
.header-button .fa-brands {
    font-size: 16px;
}

/* 年表検索バー */
.timeline-search-bar {
    display: none; /* デフォルトは非表示 */
    align-items: center;
    gap: 8px;
    margin-bottom: 12px;
    padding: 8px 12px;
    background: var(--bg-light);
    border: 1px solid var(--border-light);
    border-radius: 6px;
    box-shadow: 0 1px 2px rgba(0,0,0,0.03);
    max-width: 400px;
}
.timeline-search-bar.active {
    display: flex; /* アクティブなタブの検索バーのみ表示 */
}
.timeline-search-wrapper {
    flex: 1;
    position: relative;
    display: flex;
    align-items: center;
}
.timeline-search-bar input[type="text"] {
    flex: 1;
    width: 100%;
    padding: 7px 32px 7px 12px;
    font-size: 14px;
    border: 1px solid var(--border-color);
    border-radius: 5px;
    outline: none;
    background: var(--bg-white);
    color: var(--text-primary);
    transition: border-color 0.2s;
}
.timeline-search-bar input[type="text"]:focus {
    border-color: var(--primary);
}
.timeline-search-clear {
    position: absolute;
    right: 8px;
    top: 50%;
    transform: translateY(-50%);
    width: 20px;
    height: 20px;
    display: none;
    align-items: center;
    justify-content: center;
    background: var(--text-muted);
    color: var(--bg-white);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    font-size: 12px;
    padding: 0;
    transition: background 0.2s;
}
.timeline-search-clear:hover {
    background: var(--text-secondary);
}
.timeline-search-clear.show {
    display: flex;
}

/* 検索ヒット時のハイライト */
.timeline-highlight {
    background: #fff8dc;
    border-bottom: 2px solid #ffd700;
    transition: background 0.2s;
}

/* 検索結果が0件の時の表示 */
.timeline-no-result {
    padding: 16px;
    text-align: center;
    color: var(--text-muted);
    background: var(--bg-light);
    border-radius: 8px;
    margin: 12px 0;
}

/* フッター */
.site-footer {
    margin-top: var(--space-5);
    padding: var(--space-5) var(--space-3);
    background: var(--bg-light);
    border-top: 1px solid var(--border-light);
    text-align: center;
    font-size: 13px;
    color: var(--text-secondary);
}
.footer-content {
    max-width: 800px;
    margin: 0 auto;
}
.footer-updated {
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: var(--space-2);
}
.footer-links {
    display: flex;
    justify-content: center;
    gap: var(--space-4);
    margin: var(--space-3) 0;
    flex-wrap: wrap;
}
.footer-links a {
    color: var(--primary);
    text-decoration: none;
    font-size: 13px;
    transition: color 0.2s;
}
.footer-links a:hover {
    color: var(--primary-hover);
    text-decoration: underline;
}
.footer-copyright {
    margin-top: var(--space-3);
    font-size: 12px;
    color: var(--text-muted);
}

/* 情報提供: 記入項目リスト */
.form-fields {
    margin: 8px 0 16px;
}
.form-fields dt {
    font-weight: 600;
    color: var(--text-primary);
    margin-top: 10px;
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 14px; /* 追加: サイズ明示 */
}
.form-fields dt i {
    color: var(--primary);
    font-size: 14px;
}
.form-fields dd {
    margin: 4px 0 8px 0;
    color: var(--text-secondary);
    font-size: 14px; /* 13px → 14px 統一 */
}

/* 情報提供: 記入例ボックス */
.form-sample {
    background: var(--bg-light);
    border-left: 3px solid var(--primary);
    padding: 12px;
    border-radius: 6px;
    font-size: 14px; /* 13px → 14px 統一 */
    color: var(--text-secondary);
}
.form-sample p {
    margin: 8px 0; /* 6px → 8px 余白を統一 */
}
.form-sample strong {
    color: var(--text-primary);
}

/* 情報提供: 2カラムレイアウト・カード・チップ */
.contribute-section .contribute-subtitle {
    margin: 6px 0 12px;
    color: var(--text-secondary);
    font-size: 14px; /* 13px → 14px 統一 */
}
.contribute-chips {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin: 8px 0 16px;
}
.chip {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 4px 10px;
    border: 1px solid var(--border-light);
    background: var(--bg-white);
    color: var(--text-secondary);
    border-radius: 999px;
    font-size: 13px; /* 12px → 13px 統一 */
}
.chip i {
    color: var(--primary);
    font-size: 13px; /* 12px → 13px 統一 */
}
.contribute-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    margin-bottom: 16px;
}
/* スマホ時は1カラムに */
@media (max-width: 768px) {
    .contribute-grid {
        grid-template-columns: 1fr;
    }
}
.contribute-card {
    background: var(--bg-white);
    border: 1px solid var(--border-light);
    border-radius: 8px;
    padding: 12px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.05); /* 追加: わずかなシャドウ */
    transition: box-shadow 0.2s ease;
}
.contribute-card:hover {
    box-shadow: 0 2px 6px rgba(0,0,0,0.08); /* ホバー時に少し浮く */
}
.contribute-card h3 {
    margin-top: 0;
    margin-bottom: 12px;
    padding-bottom: 8px;
    border-bottom: 1px solid var(--border-light);
    color: #1f2d3d;
    font-size: 15px;
}

/* 既存の項目リスト/例の見た目を強化 */
.form-fields dt {
    display: flex;
    align-items: center;
    gap: 6px;
}
.form-fields dt i {
    color: var(--primary);
    font-size: 14px;
}

/* CTAカード */
.contribute-cta {
    display: flex;
    flex-direction: column;
    gap: 12px;
    align-items: center;
    text-align: center;
    padding: 16px;
    background: var(--bg-light);
    border: 1px solid var(--border-light);
    border-radius: 8px;
}

/* 情報提供: 強調コールアウト */
.notice-emphasis {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    padding: 12px;
    background: linear-gradient(90deg, var(--primary-light) 0%, transparent 60%);
    border: 1px solid var(--border-light);
    border-left: 4px solid var(--primary);
    border-radius: 8px;
    color: var(--text-secondary);
}
.notice-emphasis .icon {
    color: var(--primary);
    font-size: 16px;
    line-height: 1;
    margin-top: 2px;
}
.notice-emphasis strong {
    color: var(--text-primary);
}

/* 横スクロール対応テーブルラッパー（スマホでスワイプ可能に） */
.table-responsive {
    width: 100%;
    overflow: auto; /* 縦横スクロール */
    max-height: calc(100vh - 160px); /* 縦スクロールの高さを付与 */
    -webkit-overflow-scrolling: touch;
    scrollbar-width: thin;
    scrollbar-color: #ccc #f6f8fa;
}
.table-responsive::-webkit-scrollbar {
    height: 6px;
}
.table-responsive::-webkit-scrollbar-thumb {
    background: #ccc;
    border-radius: 3px;
}
.table-responsive table {
    min-width: 720px; /* 列の潰れを防ぐ最低幅 */
    width: auto; /* 追加: コンテンツ幅に自動調整 */
}

/* 年表ヘッダー固定（縦スクロール中も表示） */
.tab-content .table-responsive thead th {
    position: sticky;
    top: 0;
    z-index: 10;                 /* 前面に固定 */
    background: #f4f4f4;
    background-clip: padding-box;
    box-shadow: 0 1px 0 0 var(--border-color);
}

/* iOSセーフエリア（ノッチ）対応 */
@supports (padding: max(0px)) {
    .site-header {
        padding-top: max(var(--space-2), env(safe-area-inset-top));
    }
}

/* モバイル最適化（追記） */
@media (max-width: 600px) {
    body {
        font-size: 13px;
        padding: 0 4px; /* 変更: さらに余白圧縮 */
    }

    /* セクション全体の余白圧縮 */
    .section {
        padding: 12px; /* 変更: 16px → 12px */
        margin-top: 8px; /* 変更: 12px → 8px */
    }
    .section h2 {
        font-size: 17px; /* 変更: 18px → 17px */
        margin-bottom: 12px;
    }
    .section h3 {
        font-size: 14px; /* 変更: 15px → 14px */
        margin: 12px 0 8px; /* 変更: 16px → 12px */
    }
    .section p,
    .section li {
        font-size: 13px;
        line-height: 1.6; /* 変更: 行間を少し詰める */
    }

    /* ナビゲーションリンクのフォントサイズ */
    .nav-link {
        font-size: 15px; /* タップしやすさ優先 */
    }

    /* ヘッダーボタンのフォントサイズ */
    .header-button {
        font-size: 13px !important;
        padding: 8px 12px; /* タップ領域確保 */
    }

    /* テーブル: モバイル最適化 */
    th, td {
        font-size: 10px;
        padding: 6px 4px; /* 変更: タップ領域確保 */
    }
    .fit {
        padding-left: 4px;
        padding-right: 4px;
    }

    /* 検索バーのフォントサイズ */
    .timeline-search-bar {
        padding: 6px 8px; /* 変更: 余白圧縮 */
        margin-bottom: 8px;
    }
    .timeline-search-bar input[type="text"] {
        font-size: 14px; /* 変更: 13px → 14px 入力しやすく */
        padding: 8px 32px 8px 10px; /* タップ領域確保 */
    }

    /* フッターのフォントサイズ */
    .site-footer {
        font-size: 12px;
        padding: 12px 8px; /* 変更: 余白圧縮 */
    }
    .footer-links {
        flex-direction: column;
        gap: 8px; /* 変更: 6px → 8px タップしやすく */
    }
    .footer-links a {
        font-size: 13px; /* 変更: 12px → 13px */
        padding: 4px 0; /* タップ領域確保 */
    }

    /* 情報提供カードのフォントサイズ */
    .contribute-section .contribute-subtitle {
        font-size: 13px;
        margin: 4px 0 10px; /* 余白圧縮 */
    }
    .form-fields dt,
    .form-fields dd,
    .form-sample {
        font-size: 13px;
    }
    .form-fields dt {
        margin-top: 8px; /* 変更: 10px → 8px */
    }
    .chip {
        font-size: 12px;
        padding: 4px 8px; /* 変更: タップ領域確保 */
    }

    /* タブバッジのフォントサイズ */
    .tab .tab-badge {
        font-size: 10px;
        min-width: 16px;
        height: 16px;
    }

    /* タブ */
    .tabs {
        position: sticky;
        top: 57px; /* ヘッダー高さ調整 */
        background: var(--bg-white);
        z-index: 9;
        gap: 6px; /* 変更: 8px → 6px */
        padding-bottom: 4px; /* 変更: 6px → 4px */
    }
    .tab {
        min-width: 70px; /* 変更: 76px → 70px */
        padding: 6px 8px; /* 変更: タップ領域確保 */
        font-size: 13px;
        min-height: 36px; /* 変更: 40px → 36px */
    }

    /* テーブル内容領域の高さ調整 */
    .table-responsive {
        max-height: calc(100vh - 200px);
        width: 100%; /* 追加: ビューポート幅に合わせる */
        overflow-x: auto; /* 追加: 横スクロール明示 */
    }
    .table-responsive table {
        min-width: auto; /* 変更: 600px → auto コンテンツ幅優先 */
        width: max-content; /* 追加: 内容に応じた幅 */
    }

    /* Googleフォームボタンの余白圧縮 */
    .google-form-button {
        padding: 10px 16px; /* 変更: 12px 20px → 10px 16px */
        font-size: 14px !important; /* 変更: 15px → 14px */
    }

    /* お知らせボックス */
    .home-notice {
        padding: 10px 12px; /* 変更: 14px 16px → 10px 12px */
        margin-bottom: 12px; /* 変更: 20px → 12px */
    }
    .home-notice .notice-title {
        font-size: 14px; /* 変更: 15px → 14px */
    }
    .home-notice .notice-text {
        font-size: 13px; /* 変更: 14px → 13px */
    }
    .home-notice .notice-link {
        padding: 6px 12px; /* 変更: 8px 16px → 6px 12px */
        font-size: 13px !important; /* 変更: 14px → 13px */
    }

    /* カード余白圧縮 */
    .contribute-card,
    #about .about-card {
        padding: 10px; /* 変更: 14px → 10px */
    }
    .contribute-grid,
    #about .about-grid {
        gap: 12px; /* 変更: 16px → 12px */
    }

    /* 動画カード */
    .video-card {
        flex: 0 0 240px; /* 変更: 260px → 240px */
    }
    .video-card img {
        height: 135px; /* 変更: 146px → 135px */
    }
    .video-card > div {
        padding: 8px; /* 変更: 10px → 8px */
    }
    .video-card a {
        font-size: 13px; /* 変更: 14px → 13px */
    }
    .video-meta {
        font-size: 12px; /* 変更: 13px → 12px */
    }
    .carousel-btn {
        width: 32px; /* 変更: 36px → 32px */
        height: 32px;
    }
}

/* モバイル対応 */
@media (max-width: 768px) {
    .site-header {
        flex-direction: row; /* 変更: 横並びを維持 */
        align-items: center;
        gap: 8px;
        padding: 8px; /* 追加: 余白圧縮 */
    }
    .header-left {
        width: auto; /* 変更: 自動幅 */
        flex-direction: row;
        align-items: center;
        gap: 12px;
        flex: 1;
    }
    .header-logo {
        height: 40px; /* 変更: さらにコンパクト */
    }
    
    /* ハンバーガーメニュー表示 */
    .menu-toggle {
        display: flex;
        order: 2; /* ロゴの右 */
    }
    
    /* ナビゲーションを縦並びドロワーに */
    .header-nav {
        position: fixed;
        top: 57px; /* ヘッダー高さ分 */
        left: 0;
        right: 0;
        background: var(--bg-white);
        border-bottom: 1px solid var(--border-light);
        flex-direction: column;
        gap: 0;
        padding: 0;
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        z-index: 999;
    }
    .header-nav.open {
        max-height: 400px; /* メニュー展開時 */
    }
    .nav-link {
        width: 100%;
        padding: 14px 16px; /* 変更: モバイル時のみ */
        border-radius: 0;
        border-bottom: 1px solid var(--border-light);
        font-size: 15px; /* 変更: モバイル時のみ */
    }
    .nav-link:last-child {
        border-bottom: none;
    }
    
    /* ヘッダーボタンは非表示（メニュー内に統合可能だがここでは非表示） */
    .header-button {
        display: none;
    }
}

/* セクション */
.section {
    display: none;
    padding: var(--space-5);
    margin-top: var(--space-4);
    background: var(--bg-white);
    border-radius: 8px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.05); /* 追加: わずかなシャドウ */
}
.section.active {
    display: block;
}
.section h2 {
    font-size: 20px;
    margin: 0 0 16px 0;
    padding-bottom: 8px;
    border-bottom: 2px solid var(--primary);
    color: #1f2d3d;
    display: flex; /* 追加: アイコン配置 */
    align-items: center;
    gap: 8px;
}
.section h3 {
    font-size: 16px;
    margin: 16px 0 8px 0;
    color: #1f2d3d;
    display: flex; /* 追加: アイコン配置 */
    align-items: center;
    gap: 6px;
}
.section p {
    font-size: 14px;
    line-height: 1.7;
    margin: 8px 0;
    color: #333;
}
.section ul {
    padding-left: 24px;
    margin: 8px 0;
    list-style: none; /* デフォルトの箇条書きを削除 */
}
.section li {
    font-size: 14px;
    line-height: 1.7;
    margin: 4px 0;
    color: #333;
    position: relative;
    padding-left: 20px; /* アイコン分の余白 */
}
.section li::before {
    content: '✓'; /* チェックマークに変更 */
    position: absolute;
    left: 0;
    color: var(--primary);
    font-weight: bold;
}
.section a {
    color: var(--primary);
    font-size: 14px;
}
.form-note {
    background: var(--bg-light);
    border-left: 3px solid var(--primary);
    padding: 12px;
    margin: 16px 0;
    font-size: 14px; /* 13px → 14px 統一 */
    color: var(--text-secondary);
}
.google-form-container {
    margin: var(--space-4) 0;
    text-align: center;
}
.google-form-button {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 16px 32px;
    background: #4285f4;
    color: #fff !important;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 16px !important;
    font-weight: 600;
    text-decoration: none !important;
    transition: background 0.2s ease;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}
.google-form-button:hover {
    background: #3367d6;
    box-shadow: 0 3px 6px rgba(0, 0, 0, 0.3);
    color: #fff !important;
    text-decoration: none !important;
}
.google-form-button i {
    font-size: 18px;
    color: #fff;
}

/* モバイル最適化（余白圧縮＋視認性維持） */
@media (max-width: 600px) {
    body {
        padding: 0 var(--space-1);
    }
    .site-header {
        padding: var(--space-1);
    }
    .header-left {
        gap: var(--space-3);
    }
    .header-logo {
        height: 42px; /* 48px → 42px */
    }
    .header-nav {
        gap: var(--space-2);
    }
    .header-button {
        padding: 5px 9px;
    }

    /* タブラベルをモバイル用短縮名に */
    .tab .tab-label::before {
        content: attr(data-label-short); /* モバイル時は短縮名 */
    }

    /* タブ密度調整（行間・幅をコンパクトに） */
    :root {
        --tab-padding-y: 6px;   /* 8px → 6px */
        --tab-gap: 6px;         /* 8px → 6px */
        --tab-font-size: 13px;  /* 14px → 13px */
    }
    .tabs {
        margin-bottom: var(--space-2);
        padding-bottom: var(--space-1);
    }

    /* セクションの余白圧縮 */
    .section {
        padding: var(--space-4);
        margin-top: var(--space-3);
    }

    /* Googleフォームボタンの余白圧縮 */
    .google-form-button {
        padding: 12px 20px;
        font-size: 15px !important;
    }

    /* テーブル: 文字サイズとパディングの微調整 */
    th, td {
        font-size: 9px;
        padding: 3px 5px;
    }
    .fit {
        padding-left: 3px;
        padding-right: 3px;
    }

    .site-footer {
        padding: var(--space-4) var(--space-2);
        font-size: 12px;
    }
    .footer-links {
        flex-direction: column;
        gap: var(--space-2);
    }
}

/* 年表内リンクの文字サイズをセルと統一 */
.tab-content td a,
.tab-content th a {
    font-size: inherit;
}

/* Thanksセクション専用スタイル */
#thanks ul {
    padding-left: 0;
}
#thanks li {
    padding-left: 0;
}
#thanks li::before {
    content: none;
}
/* Thanksセクションの分類見出し */
#thanks h3 {
    margin-top: 20px;
    margin-bottom: 10px;
    color: #3498db;
    font-size: 17px; /* 16px → 17px 他のh3と統一 */
}
/* Thanks名前リスト */
.thanks-name-list {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    list-style: none;
    margin: 8px 0 16px 0;
}
.thanks-name-item {
    background: #f6f8fa;
    border-radius: 6px;
    padding: 8px 14px !important;
    font-weight: 500;
    color: #3498db;
    font-size: 14px; /* 13px → 14px 統一 */
}
/* Thanks注釈 */
#thanks .thanks-note {
    color: #888;
    font-size: 14px; /* 13px → 14px 統一 */
    margin-top: 16px;
}

/* サイトについてセクション専用スタイル */
#about .about-links {
    padding-left: 0;
    list-style: none;
    margin: 12px 0;
}
#about .about-links li {
    padding-left: 0;
    margin: 8px 0;
}
#about .about-links li::before {
    content: none;
}
#about .about-links a {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    color: var(--primary);
    transition: color 0.2s;
    padding: 4px 0; /* タップ領域を確保 */
}
#about .about-links a:hover {
    color: var(--primary-hover);
}
#about .about-links i {
    font-size: 16px;
    width: 20px;
    text-align: center;
    flex-shrink: 0; /* アイコンが縮まないように */
}

/* サイトについて: リードボックス */
#about .about-lead {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    padding: 12px 16px; /* 12px → 12px 16px 左右余白を追加 */
    background: linear-gradient(90deg, var(--primary-light) 0%, transparent 60%);
    border: 1px solid var(--border-light);
    border-left: 4px solid var(--primary);
    border-radius: 8px;
    margin: 0 0 20px 0; /* 8px 0 16px 0 → 0 0 20px 0 下余白を統一 */
    color: var(--text-secondary);
}
#about .about-lead i {
    color: var(--primary);
    font-size: 18px;
    line-height: 1;
    margin-top: 2px;
    flex-shrink: 0; /* アイコンが縮まないように */
}
#about .about-lead p {
    margin: 0; /* 4px 0 10px 0 → 0 リード内の余白をリセット */
    font-size: 14px; /* 12px → 14px 本文と同じサイズに */
}

/* サイトについて: カードとグリッド */
#about .about-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    margin: 0 0 20px 0; /* 16px 0 → 0 0 20px 0 下余白を統一 */
}
#about .about-card {
    background: var(--bg-white);
    border: 1px solid var(--border-light);
    border-radius: 8px;
    padding: 16px; /* 12px → 16px 内側余白を増やして余裕を持たせる */
    box-shadow: 0 1px 3px rgba(0,0,0,0.05);
}
#about .about-card h3 {
    margin-top: 0;
    margin-bottom: 12px;
    padding-bottom: 8px;
    border-bottom: 1px solid var(--border-light);
    display: flex;
    align-items: center;
    gap: 6px;
    color: #1f2d3d;
    font-size: 16px;
}
#about .about-card h3:not(:first-child) {
    margin-top: 20px; /* 2つ目以降の見出しは上余白追加 */
}
#about .about-card p {
    margin: 10px 0; /* 8px 0 → 10px 0 段落の余白を統一 */
    color: var(--text-secondary);
    line-height: 1.7; /* 行間を追加 */
}
#about .about-card ul {
    margin: 10px 0; /* 余白を統一 */
}
/* 免責事項カードだけ背景をやや強調 */
#about .about-card.about-disclaimer {
    background: var(--bg-light);
    margin-top: 20px; /* グリッド外の単独カードのため上余白追加 */
}

/* 参考元カード */
#about .about-card:has(.reference-links) {
    margin-top: 20px; /* グリッド外の参考元カードに上余白追加 */
    padding: 16px; /* 他のカードと統一 */
}

/* 参考元はカード内のグリッドを使用 */
#about .reference-links {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin: 12px 0 0 0; /* 8px 0 0 0 → 12px 0 0 0 上余白を調整 */
}
#about .ref-group h4 {
    font-size: 15px;
    margin: 0 0 10px 0;
    color: #1f2d3d;
    font-weight: 600;
}
#about .ref-group .about-links {
    margin: 0; /* 12px 0 → 0 余白をリセット */
}

/* スマホ時は1カラム */
@media (max-width: 768px) {
    #about .about-grid {
        grid-template-columns: 1fr;
        gap: 16px; /* カード間の余白を維持 */
    }
    #about .reference-links {
        grid-template-columns: 1fr;
        gap: 16px;
    }
    #about .about-card {
        padding: 14px; /* 16px → 14px スマホ時は少し圧縮 */
    }
}

/* ホームセクション: お知らせボックス */
.home-notice {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 14px 16px;
    margin-bottom: 20px;
    background: linear-gradient(135deg, #fff9e6 0%, #fffbf0 100%);
    border: 1px solid #ffd966;
    border-left: 4px solid #ff9800;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(255, 152, 0, 0.1);
}
.home-notice .notice-icon {
    color: #ff9800;
    font-size: 20px;
    line-height: 1;
    margin-top: 2px;
    flex-shrink: 0;
}
.home-notice .notice-content {
    flex: 1;
}
.home-notice .notice-title {
    font-size: 15px;
    font-weight: 600;
    color: #e65100;
    margin: 0 0 8px 0;
    display: flex;
    align-items: center;
    gap: 6px;
}
.home-notice .notice-text {
    font-size: 14px;
    line-height: 1.7;
    color: #333;
    margin: 4px 0;
}
.home-notice .notice-link {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    margin-top: 10px;
    padding: 8px 16px;
    background: #ff9800;
    color: #fff !important;
    border-radius: 6px;
    font-size: 14px !important;
    font-weight: 600;
    text-decoration: none !important;
    transition: background 0.2s ease;
}
.home-notice .notice-link:hover {
    background: #f57c00;
    text-decoration: none !important;
}
.home-notice .notice-link i {
    font-size: 14px;
}

/* トップへ戻るボタン（ページ全体用） */
.back-to-top {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 48px;
    height: 48px;
    background: var(--primary);
    color: #fff;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    transition: all 0.3s ease;
    z-index: 999;
}
.back-to-top:hover {
    background: var(--primary-hover);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}
.back-to-top.show {
    display: flex;
}
.back-to-top i {
    font-size: 20px;
}

/* トップへ戻るボタン（年表用） */
.back-to-table-top {
    position: fixed;
    bottom: 80px; /* ページ用ボタンの上に配置 */
    right: 20px;
    width: 48px;
    height: 48px;
    background: var(--kotoha);
    color: #fff;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    transition: all 0.3s ease;
    z-index: 998;
}
.back-to-table-top:hover {
    background: var(--kotoha-hover);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}
.back-to-table-top.show {
    display: flex;
}
.back-to-table-top i {
    font-size: 20px;
}

@media (max-width: 600px) {
    .back-to-top {
        width: 44px;
        height: 44px;
        bottom: 16px;
        right: 16px;
    }
    .back-to-table-top {
        width: 44px;
        height: 44px;
        bottom: 70px;
        right: 16px;
    }
}

/* 動画紹介セクション */
.videos-carousel-wrapper {
    position: relative;
    margin-bottom: 24px;
}

.videos-carousel {
    display: flex;
    gap: 20px;
    overflow-x: auto;
    scroll-behavior: smooth;
    padding: 10px 0;
    /* スクロールバーを完全に非表示 */
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE/Edge */
}

/* Webkit系ブラウザでもスクロールバーを非表示 */
.videos-carousel::-webkit-scrollbar {
    display: none;
}

.carousel-btn {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 40px;
    height: 40px;
    background: rgba(32, 35, 39, 0.72);
    color: #fff;
    border: 1px solid rgba(255, 255, 255, 0.25);
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 16px rgba(0,0,0,0.25);
    z-index: 2;
    transition: all 0.2s ease;
}

.carousel-btn:hover:not(:disabled) {
    background: rgba(32, 35, 39, 0.9);
    box-shadow: 0 6px 18px rgba(0,0,0,0.3);
}

.carousel-btn:focus-visible {
    outline: none;
    /* アクセント色のフォーカスリング */
    box-shadow: 0 0 0 3px rgba(52,152,219,0.35), 0 6px 18px rgba(0,0,0,0.35);
}

.carousel-btn:disabled {
    opacity: 0.45; /* 無効時は薄く */
    cursor: not-allowed;
}

.carousel-btn.prev {
    left: -10px;
}

.carousel-btn.next {
    right: -10px;
}

.carousel-btn i {
    color: #fff; /* 常に白で高コントラスト */
    /* text-shadowで更に視認性を補助（任意） */
    text-shadow: 0 1px 2px rgba(0,0,0,0.35);
}

.video-card {
    flex: 0 0 280px;
    background: #fff;
    border-radius: 8px;
    box-shadow: 0 1px 4px rgba(0,0,0,0.07);
    overflow: hidden;
    border: 1px solid #eee;
    display: flex;
    flex-direction: column;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.video-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.12);
}

.video-card img {
    width: 100%;
    height: 157px;
    object-fit: cover;
    background: #eee;
}

.video-card > div {
    padding: 10px;
}

.video-card a {
    font-size: 14px;
    font-weight: 600;
    color: #3498db;
    text-decoration: none;
}

.video-card a:hover {
    text-decoration: underline;
    color: #217dbb;
}

.videos-heading {
    margin-top: 24px;
    margin-bottom: 16px;
    display: flex;
    align-items: center;
    gap: 8px;
    color: #1f2d3d;
    font-size: 16px;
}
.video-meta {
    font-size: 13px;
    color: #888;
    margin-bottom: 4px;
}
.video-card .video-thumb {
    display: block;
}

/* モーション削減（環境設定に追従） */
@media (prefers-reduced-motion: reduce) {
    html:focus-within { scroll-behavior: auto; }
    *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

/* Skip link（アクセシビリティ） */
.skip-link {
    position: absolute;
    left: -9999px;
    top: auto;
    width: 1px;
    height: 1px;
    overflow: hidden;
}
.skip-link:focus {
    left: 8px;
    top: 8px;
    width: auto;
    height: auto;
    padding: 8px 12px;
    background: var(--primary);
    color: #fff;
    border-radius: 6px;
    z-index: 1001;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
}
